import{a as ye,u as L,r as u,b as Z,j as e,c as je,S as R,d as _,e as ve,f as I,g as Q,h as E,i as be,k as Ce,l as we,m as K,D as Se,T as J,L as X,n as ee,o as te,p as O,q as se,s as P,P as ke,B as Fe,t as Pe,R as Te,_ as S,v as T,I as j,w as Ie,x as ze,y as De,z as $e,A as f,C as Be,E as Ae,F as Re,G as C,H as qe,J as w,K as Le,M as _e,N as F,O as Oe,Q as Ee,U as Me,V as Ne,W as Qe,X as Ke,Y as We,Z as Ue,$ as U,a0 as He,a1 as Ve,a2 as Ge,a3 as H,a4 as re,a5 as Ye,a6 as Ze,a7 as ne,a8 as Je,a9 as Xe,aa as et,ab as tt,ac as b,ad as st,ae as rt,af as nt,ag as ot,ah as at,ai as it,aj as lt,ak as oe,al as ae,am as ct,an as dt,ao as V,ap as ut,aq as pt,ar as ht,as as xt,at as mt,au as ft,av as gt,aw as G,ax as yt,ay as jt,az as vt,aA as bt}from"./vendor-oJTxWfXc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const m=ye.create({timeout:120*1e3,withCredentials:!0});m.interceptors.request.use(function(s){const t=JSON.parse(localStorage.getItem("settings"));return t&&t.apiUrl&&(s.baseURL=t.apiUrl),s});async function Ct(){const s=await m.get("/api/auth/session"),t=s.headers["content-type"];return t&&t.includes("application/json")?s.data:null}function z({onUnauthenticated:s=()=>{}}={}){const{data:t,status:r,isLoading:n,refetch:o}=L({queryKey:["session"],queryFn:Ct,staleTime:18e5,gcTime:21e5,refetchOnWindowFocus:!1});return u.useEffect(()=>{!t&&r==="success"&&s()},[t,s,r]),{data:t,status:r,isLoading:n,refetch:o}}const ie=u.createContext({});function wt({children:s}){const t=u.useRef(null),n=Z().palette.onPrimaryContainer.main,o=()=>{var l;return(l=t==null?void 0:t.current)==null?void 0:l.continuousStart()},a=()=>{var l;return(l=t==null?void 0:t.current)==null?void 0:l.complete()},i=u.useMemo(()=>({ref:t,startProgress:o,stopProgress:a}),[t,o,a]);return e.jsxs(ie.Provider,{value:i,children:[s,e.jsx(je,{color:n,ref:t,waitingTime:200})]})}const St=()=>u.useContext(ie),kt={"my-drive":{sort:"name",order:R.ASC},search:{sort:"name",order:R.ASC},starred:{sort:"updatedAt",order:R.DESC},recent:{sort:"updatedAt",order:R.DESC}};function B(){const[s,t]=_("sortFilter",kt);return{sortFilter:s,setSortFilter:t}}const Ft=()=>{const s=I(),t=E(),{startProgress:r,stopProgress:n}=St(),{sortFilter:o}=B();return{preloadFiles:u.useCallback(i=>{const l=["files",i.type,i.path,o[i.type].sort,o[i.type].order],d=s.getQueryState(l);d!=null&&d.data?t(`/${i.type}${i.path}`):(r(),s.prefetchInfiniteQuery({queryKey:l,queryFn:le(i.type,i.path,o),initialPageParam:""}).then(()=>{t(`/${i.type}${i.path}`),n()}).catch(()=>n()))},[s,o])}},is=s=>{const{sortFilter:t}=B(),r=["files",s.type,s.path,t[s.type].sort,t[s.type].order],{data:n,isLoading:o,fetchNextPage:a,hasNextPage:i,isFetchingNextPage:l,error:d,...h}=ve({queryKey:r,queryFn:le(s.type,s.path,t),initialPageParam:"",getNextPageParam:(p,x)=>p.nextPageToken?p==null?void 0:p.nextPageToken:void 0});return{data:n,isLoading:o,error:d,fetchNextPage:a,hasNextPage:i,isFetchingNextPage:l,rest:h}},le=(s,t,r)=>async({pageParam:n,signal:o})=>{var d;const a="/api/files",i={nextPageToken:n,perPage:200,order:r[s].order,sort:r[s].sort};return s==="my-drive"&&(i.path=t||"/"),s==="search"&&(i.op="search",i.search=((d=t.split("/"))==null?void 0:d[1])??""),s==="search"&&!i.search?{results:[]}:(s==="starred"&&(i.op="find",i.starred=!0),s==="recent"&&(i.op="find",i.type="file"),(await m.get(a,{params:i,signal:o})).data)},ls=s=>{const{sortFilter:t}=B(),r=["files",s.type,s.path,t[s.type].sort,t[s.type].order],n=I();return{mutation:Q({mutationFn:async a=>(await m.post("/api/files",a.payload)).data,onSuccess:(a,i,l)=>{a.id&&n.invalidateQueries({queryKey:r})}})}},cs=s=>{const{sortFilter:t}=B(),r=["files",s.type,s.path,t[s.type].sort,t[s.type].order],n=I();return{mutation:Q({mutationFn:async a=>(await m.patch(`/api/files/${a.id}`,a.payload)).data,onMutate:async a=>{await n.cancelQueries({queryKey:r});const i=n.getQueryData(r);return i&&n.setQueryData(r,l=>({...l,pages:l==null?void 0:l.pages.map(d=>({...d,results:d.results.map(h=>h.id===a.id?{...h,...a.payload}:h)}))})),{previousFiles:i}},onError:(a,i,l)=>{l!=null&&l.previousFiles&&n.setQueryData(r,l==null?void 0:l.previousFiles)},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}},ds=s=>{const{sortFilter:t}=B(),r=["files",s.type,s.path,t[s.type].sort,t[s.type].order],n=I();return{mutation:Q({mutationFn:async a=>(await m.post("/api/files/delete",{files:a.files})).data,onMutate:async a=>{await n.cancelQueries({queryKey:r});const i=n.getQueryData(r);return n.setQueryData(r,l=>({...l,pages:l==null?void 0:l.pages.map(d=>({...d,results:d.results.filter(h=>h.id!==a.id)}))})),{previousFiles:i}},onError:(a,i,l)=>{n.setQueryData(r,l==null?void 0:l.previousFiles)},onSettled:()=>{n.invalidateQueries({queryKey:r})}})}},c={markdown:"markdown",image:"image",text:"text",pdf:"pdf",code:"code",video:"video",audio:"audio",office:"office",epub:"epub"},Pt={gif:c.image,jpeg:c.image,jpg:c.image,png:c.image,webp:c.image,md:c.markdown,markdown:c.markdown,mdown:c.markdown,pdf:c.pdf,doc:c.office,docx:c.office,ppt:c.office,pptx:c.office,xls:c.office,xlsx:c.office,c:c.code,cpp:c.code,js:c.code,jsx:c.code,java:c.code,sh:c.code,cs:c.code,py:c.code,css:c.code,html:c.code,ts:c.code,tsx:c.code,rs:c.code,vue:c.code,json:c.code,yml:c.code,yaml:c.code,toml:c.code,txt:c.code,vtt:c.code,srt:c.code,log:c.code,diff:c.code,mp4:c.video,flv:c.video,webm:c.video,m3u8:c.video,mkv:c.video,mov:c.video,avi:c.video,mp3:c.audio,m4a:c.audio,aac:c.audio,wav:c.audio,ogg:c.audio,oga:c.audio,opus:c.audio,flac:c.audio,epub:c.epub};function Tt(s,t){let r=Pt[s];return r&&(s==="ts"&&t!=null&&t.video&&(r=c.video),r)}function us(s){const t=ce(s);switch(t){case"ts":case"tsx":return"typescript";case"rs":return"rust";case"js":case"jsx":return"javascript";case"sh":return"shell";case"cs":return"csharp";case"py":return"python";case"yml":return"yaml";default:return t}}const ps=s=>s.map(t=>t.mimeType==="drive/folder"?{id:t.id,name:t.name,type:t.type,location:t.parentPath,size:t.size?Number(t.size):0,modDate:t.updatedAt,path:t.path,isDir:!0}:{id:t.id,name:t.name,type:t.type,size:t.size?Number(t.size):0,modDate:t.updatedAt,starred:t.starred,location:t.parentPath,previewType:Tt(ce(t.name),{video:t.mimeType.includes("video")})}),hs=(s,t=!0)=>t?window.open(s,"_blank"):window.location.href=s,xs=()=>[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(function(t){return navigator.userAgent.match(t)}),ms=s=>{const t=s==null?void 0:s.split("/").slice(1),r={};let n="/";r["My Drive"]="";for(let o of t){let a=decodeURIComponent(o);r[a]=n+a,n=n+a+"/"}return r};function It(s){return s.slice((s.lastIndexOf(".")-1>>>0)+2)}function ce(s){return It(s).toLowerCase()}const fs=(s,t)=>String(s).padStart(t,"0"),gs=(s,t,r,n,o=!1)=>`${s||window.location.origin}/api/files/${t}/stream/${encodeURIComponent(r)}?hash=${n}${o?"&d=1":""}`,de=[{value:500*1024*1024,label:"500MB"},{value:1e3*1024*1024,label:"1GB"},{value:2*1e3*1024*1024,label:"2GB"}],zt=s=>{const{type:t}=s;let r=s["*"];return r&&!r.startsWith("/")&&(r="/"+r),{type:t,path:r}},Dt=s=>new Promise((t,r)=>{const n=s.join(`
`);navigator.clipboard.writeText(n).then(()=>{t("copy success")}).catch(o=>{const a="Unable to copy array to clipboard: "+o;r(a)})});function ys(s){const t=Math.floor(s/60),r=Math.floor(s-t*60);return`${t}:${r<10?`0${r}`:r}`}function js(s){const t=s*1e3;return new Date(t).toISOString()}const $t="",Bt="",At="",N={version:$t,commit:Bt,link:At},ue=[{id:"my-drive",name:"My Drive",icon:e.jsx(be,{}),active:!0},{id:"starred",name:"Starred",icon:e.jsx(Ce,{})},{id:"recent",name:"recent",icon:e.jsx(we,{})}],Rt=s=>{const{...t}=s,r=zt(K()),{type:n}=r,{preloadFiles:o}=Ft(),[a,i]=u.useState("");u.useEffect(()=>{n&&i(n)},[n]);const l=(d,h)=>{i(h),o({type:h,path:""})};return e.jsxs(Se,{variant:"permanent",...t,children:[e.jsx(J,{}),e.jsx(X,{children:ue.map(({id:d,name:h,icon:p})=>e.jsx(ee,{children:e.jsxs(te,{selected:a===d,onClick:x=>l(x,d),children:[e.jsx(O,{children:p}),e.jsx(se,{children:h})]})},d))}),e.jsxs(P,{sx:{position:"fixed",bottom:10,left:0,padding:2,cursor:"pointer",textDecoration:"none",color:"inherit"},component:"a",href:N.link,target:"_blank",rel:"noopener noreferrer",gutterBottom:!0,children:["Build: ",N.version,"-",N.commit]})]})};function qt(){const[s,t]=u.useState(""),r=E(),{type:n}=K();return u.useEffect(()=>{n&&t(n)},[n]),e.jsx(ke,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:o=>o.zIndex.drawer,display:"none","@media (max-width: 1024px)":{display:"block"}},elevation:3,children:e.jsx(Fe,{showLabels:!0,value:s,onChange:(o,a)=>{t(a)},children:ue.map(({id:o,name:a,icon:i})=>e.jsx(Pe,{value:o,label:a,icon:i,onClick:()=>r(o)},o))})})}const W=Te.createContext({toggleColorMode:()=>{},resetTheme:()=>{},setSchemeColor:s=>{},schemeColor:""});function Lt(s){const t=u.useRef();return u.useEffect(()=>{t.current=s},[s]),t.current}const _t={apiUrl:"",splitFileSize:de[1].value,uploadConcurrency:4,encryptFiles:"no",resizerHost:""};function pe(){const[s,t]=_("settings",_t);return{settings:s,setSettings:t}}const Ot=[{id:"account",name:"Account",icon:e.jsx(He,{})},{id:"bots",name:"Bots",icon:e.jsx(Ve,{})},{id:"other",name:"Other",icon:e.jsx(Ge,{})}],Et=s=>{if(s)return/^\d{10}:[A-Za-z\d_-]{35}$/gm.test(s)||"Invalid Token format"},Mt=u.memo(()=>{const[s,t]=u.useState(!1),r=u.useCallback(()=>{t(!0),m.get("/api/users/bots/revoke").then(()=>{S.success("session revoked")}).finally(()=>{t(!1)})},[]);return e.jsx(T,{title:"Revoke Bot Session",children:e.jsx(j,{sx:{marginTop:"1rem"},disabled:s,onClick:r,children:e.jsx(Ie,{})})})}),Nt=u.memo(({isRemoving:s,onClick:t})=>e.jsx(T,{title:"Remove Bots",children:e.jsx(j,{sx:{marginTop:"1rem"},disabled:s,onClick:t,children:e.jsx(ze,{})})})),Qt=u.memo(({control:s})=>{const t=De(),r=[{title:"Total Storage",dataKey:"totalSize",formatter:p=>Oe.formatFileSize(t,{size:p})},{title:"Total Files",dataKey:"totalFiles"}],{value:n,setTrue:o}=$e(!1),{data:a}=z(),{data:i,isLoading:l}=L({queryKey:["user","stats",a==null?void 0:a.userName],queryFn:async()=>(await m.get("/api/users/stats")).data}),{data:d,isLoading:h}=L({queryKey:["user","channels",a==null?void 0:a.userName],queryFn:async()=>(await m.get("/api/users/channels")).data,enabled:n});return e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:{display:"flex",flexWrap:"wrap",gap:"1rem"},children:r.map((p,x)=>e.jsx(f,{sx:{margin:"auto"},children:l?e.jsx(Be,{sx:{height:140,width:"50%",maxHeight:140,minWidth:200,borderRadius:"20px"},animation:"wave",variant:"rectangular"}):e.jsx(Ae,{sx:{width:"50%",maxHeight:140,minWidth:200,cursor:"pointer",bgcolor:"primaryContainer.main"},children:e.jsxs(Re,{children:[e.jsx(P,{variant:"h5",component:"div",children:p.title}),e.jsx(P,{variant:"h4",component:"div",children:p.formatter?p.formatter(i==null?void 0:i[p.dataKey]):i==null?void 0:i[p.dataKey]})]})})},p.dataKey))}),i&&e.jsx(C,{name:"channel",control:s,rules:{required:!0},render:({field:{onChange:p}})=>e.jsx(qe,{onOpen:o,sx:{marginTop:"2rem"},onChange:(x,v)=>{p(v)},defaultValue:i.channelId?{channelId:i.channelId,channelName:i.channelName}:void 0,options:d||[],getOptionLabel:x=>x.channelName,isOptionEqualToValue:(x,v)=>x.channelName===v.channelName,filterSelectedOptions:!0,renderInput:x=>e.jsx(w,{...x,label:"Set Default Channel",InputProps:{...x.InputProps,endAdornment:e.jsxs(e.Fragment,{children:[h?e.jsx(Le,{color:"inherit",size:20}):null,x.InputProps.endAdornment]})}})})})]})}),Kt=u.memo(({control:s})=>{const{data:t}=z(),{data:r,refetch:n}=L({queryKey:["user","bots",t==null?void 0:t.userName],queryFn:async()=>(await m.get("/api/users/bots")).data}),[o,a]=u.useState(!1),i=u.useCallback(()=>{a(!0),m.delete("/api/users/bots").then(()=>{S.success("bots removed")}).finally(()=>{n().finally(()=>{a(!1)})})},[]),l=u.useCallback(()=>{r&&r.length>0&&Dt(r).then(()=>{S.success("Tokens Copied")})},[r]);return e.jsxs(e.Fragment,{children:[e.jsx(P,{component:"p",children:"Enter bots here  1 per line:"}),e.jsx(C,{name:"bots",control:s,rules:{required:!0,validate:Et},render:({field:d,fieldState:{error:h}})=>e.jsx(w,{...d,sx:{margin:"1rem",width:"90%"},label:"Add Bots",id:"bots",placeholder:"Enter New Bots",rows:5,autoComplete:"off",multiline:!0,helperText:h?h.message:""})}),r&&e.jsxs(e.Fragment,{children:[e.jsx(P,{sx:{marginTop:"1rem"},component:"h6",children:`Current Bots : ${r.length}`}),e.jsxs(f,{sx:{display:"flex",gap:"1rem"},children:[r.length>0&&e.jsx(Nt,{isRemoving:o,onClick:i}),e.jsx(Mt,{}),e.jsx(T,{title:"Copy Tokens",children:e.jsx(j,{sx:{marginTop:"1rem"},onClick:l,children:e.jsx(_e,{})})})]})]})]})}),Wt=u.memo(({control:s})=>e.jsxs(e.Fragment,{children:[e.jsx(C,{name:"apiUrl",control:s,render:({field:t,fieldState:{error:r}})=>e.jsx(w,{...t,margin:"normal",id:"apiUrl",fullWidth:!0,error:!!r,type:"text",label:"API URL",helperText:r?r.message:""})}),e.jsx(C,{name:"resizerHost",control:s,render:({field:t,fieldState:{error:r}})=>e.jsx(w,{...t,margin:"normal",fullWidth:!0,error:!!r,type:"text",label:"Resize Host",helperText:r?r.message:""})}),e.jsx(C,{name:"uploadConcurrency",control:s,render:({field:t,fieldState:{error:r}})=>e.jsx(w,{...t,margin:"normal",fullWidth:!0,error:!!r,type:"text",id:"uploadConcurrency",label:"Concurrent Part Uploads",helperText:r?r.message:""})}),e.jsx(C,{name:"splitFileSize",control:s,render:({field:t,fieldState:{error:r}})=>e.jsx(w,{...t,select:!0,label:"Split File Size",fullWidth:!0,id:"splitFileSize",margin:"normal",helperText:r?r.message:"",children:de.map(n=>e.jsx(F,{value:n.value,children:n.label},n.value))})}),e.jsx(C,{name:"encryptFiles",control:s,render:({field:t,fieldState:{error:r}})=>e.jsx(w,{...t,select:!0,label:"Encrypt Files",fullWidth:!0,id:"encryptFiles",margin:"normal",helperText:r?r.message:"",children:["yes","no"].map((n,o)=>e.jsx(F,{value:n,children:n},o))})})]}));function Ut({open:s,onClose:t}){const{settings:r,setSettings:n}=pe(),[o,a]=u.useState("account"),[i,l]=u.useState(!1),{control:d,handleSubmit:h}=Ee({defaultValues:r}),{data:p}=z();u.useEffect(()=>{p||a("other")},[p]);const x=I(),v=u.useCallback(async g=>{var A;switch(o){case"account":l(!0);try{await m.patch("/api/users/channels",g.channel),S.success("channel updated"),x.invalidateQueries({queryKey:["user","stats"]}),x.invalidateQueries({queryKey:["user","bots"]})}catch(M){const $=M;$.response&&S.error($.response.data.error)}finally{l(!1)}break;case"bots":const k=(A=g.bots)==null?void 0:A.trim().split(`
`);if((k==null?void 0:k.length)>0){l(!0);try{await m.post("/api/users/bots",k),S.success("bots added"),x.invalidateQueries({queryKey:["user","bots"]})}catch(M){const $=M;$.response&&S.error($.response.data.error)}finally{l(!1)}}break;case"other":const{uploadConcurrency:he,splitFileSize:xe,apiUrl:me,encryptFiles:fe,resizerHost:ge}=g;n({uploadConcurrency:he,splitFileSize:xe,apiUrl:me,encryptFiles:fe,resizerHost:ge});break}},[o]),D=u.useCallback(()=>{switch(o){case"account":return e.jsx(e.Fragment,{children:p&&e.jsx(Qt,{control:d})});case"bots":return e.jsx(e.Fragment,{children:p&&e.jsx(Kt,{control:d})});case"other":return e.jsx(Wt,{control:d});default:return null}},[o]);return e.jsxs(Me,{open:s,onClose:t,PaperProps:{sx:{width:"75vw",maxWidth:800,height:"70vh"}},children:[e.jsx(Ne,{children:"Settings"}),e.jsx(f,{sx:{height:"8px"},children:i&&e.jsx(Qe,{})}),e.jsx(Ke,{children:e.jsxs(f,{sx:{display:"flex",flexDirection:"row",gap:"1rem",height:"100%"},children:[e.jsx(X,{sx:{minWidth:"160px",width:"25%"},children:Ot.filter(g=>!(g.id!=="other"&&!p)).map(({id:g,name:A,icon:k})=>e.jsx(ee,{sx:{paddingLeft:0,paddingRight:2},children:e.jsxs(te,{selected:o===g,onClick:()=>a(g),children:[e.jsx(O,{children:k}),e.jsx(se,{children:A})]})},g))}),e.jsx(We,{orientation:"vertical",variant:"middle",flexItem:!0}),e.jsx(f,{id:"hook-form",component:"form",onSubmit:h(v),sx:{flex:1},children:D()})]})}),e.jsxs(Ue,{children:[e.jsx(U,{onClick:t,children:"Cancel"}),e.jsx(U,{disabled:i,type:"submit",form:"hook-form",children:"Save"})]})]})}function Ht(){const{settings:s}=pe(),[t,r]=u.useState(null),[n,o]=u.useState(!1),a=!!t,i=D=>{r(D.currentTarget)},l=()=>{r(null)},{data:d,refetch:h}=z(),p=E(),x=I(),v=u.useCallback(async()=>{const D=await m.post("/api/auth/logout");h(),D.status===200&&(x.removeQueries(),p("/login",{replace:!0}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx(j,{onClick:i,color:"inherit",sx:{p:.5},"aria-controls":a?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,children:d!=null&&d.name?e.jsx(H,{alt:"profile",sx:{width:28,height:28},src:`${s.apiUrl??window.location.origin}/api/users/profile?photo=1&hash=${d.hash}`}):e.jsx(H,{alt:"profile",sx:{bgcolor:"secondaryContainer.contrastText",width:28,height:28,fontSize:16},children:"U"})}),e.jsxs(re,{anchorEl:t,id:"account-menu",open:a,onClose:l,onClick:l,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,bgcolor:"background.paper","& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[d&&e.jsx(F,{onClick:l,children:d==null?void 0:d.userName}),e.jsxs(F,{onClick:()=>o(!0),children:[e.jsx(O,{children:e.jsx(Ye,{fontSize:"small"})}),"Settings"]}),d&&e.jsxs(F,{onClick:()=>v(),children:[e.jsx(O,{children:e.jsx(Ze,{fontSize:"small"})}),"Logout"]})]}),n&&e.jsx(Ut,{open:n,onClose:()=>o(!1)})]})}function Vt(){const[s,t]=u.useState(null),r=!!s,n=d=>{t(d.currentTarget)},o=()=>{t(null)},{schemeColor:a,setSchemeColor:i}=u.useContext(W),l=ne(d=>i(d),200);return e.jsxs(e.Fragment,{children:[e.jsx(T,{title:"Change Color",children:e.jsx(j,{onClick:n,color:"inherit",sx:{p:.5},"aria-controls":r?"color-menu":void 0,"aria-haspopup":"true","aria-expanded":r?"true":void 0,children:e.jsx(Je,{})})}),e.jsx(re,{anchorEl:s,id:"color-menu",open:r,onClose:o,slotProps:{paper:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,bgcolor:"background.paper","& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:e.jsxs(F,{children:[e.jsx(Xe,{color:a,onChange:l}),";"]})})]})}const q="AppBar",y={search:`${q}-search`,searchIcon:`${q}-searchIcon`,inputRoot:`${q}-inputRoot`,inputInput:`${q}-inputInput`},Gt=et(tt)(({theme:s})=>({[`& .${y.search}`]:{height:"48px",display:"flex",borderRadius:6*s.shape.borderRadius,backgroundColor:s.palette.background.paper,width:"100%",maxWidth:"420px",color:s.palette.text.primary,[s.breakpoints.down("sm")]:{display:"none"}},[`& .${y.searchIcon}`]:{padding:s.spacing(1.25),height:"100%",display:"flex",alignItems:"center",color:s.palette.text.primary},[`& .${y.inputRoot}`]:{color:s.palette.text.primary,width:"90%"},[`& .${y.inputInput}`]:{padding:s.spacing(1.25),transition:s.transitions.create("width"),color:s.palette.text.primary,width:"100%",fontSize:"0.8em",[s.breakpoints.up("sm")]:{fontSize:"1em"}}})),Yt=s=>s.trim().replace(/\s+/g," "),Zt=()=>{const[s,t]=u.useState(""),r=E(),n=K(),o=Lt(n.type),a=u.useCallback(ne(l=>r(`/search/${l.trimEnd()}`),1e3),[n.type]),i=u.useCallback(l=>{t(l.target.value);const d=Yt(l.target.value);d&&a(d)},[]);return u.useEffect(()=>{o=="search"&&n.type!=o?t(""):n.type=="search"&&t(n["*"])},[n.type,o,n["*"]]),e.jsxs(f,{className:y.search,children:[e.jsx(f,{className:y.searchIcon,children:e.jsx(at,{})}),e.jsx(it,{placeholder:"Search Drive....",classes:{root:y.inputRoot,input:y.inputInput},value:s,inputProps:{"aria-label":"search",enterKeyHint:"search",autoComplete:"off"},onChange:i}),e.jsx(f,{className:y.searchIcon,children:e.jsx(j,{style:{height:"35px",width:"35px"},onClick:()=>t(""),size:"large",children:e.jsx(lt,{})})})]})};function Jt({session:s}){const{palette:t}=Z(),{toggleColorMode:r,resetTheme:n}=u.useContext(W);return e.jsx(Gt,{sx:{flexGrow:1,backgroundColor:"background.default",maxHeight:64,zIndex:o=>o.zIndex.drawer+1},color:"default",position:"fixed",children:e.jsx(J,{sx:{margin:"auto 0 auto 0"},children:e.jsxs(b,{container:!0,spacing:1,alignItems:"center",children:[e.jsx(b,{item:!0,children:e.jsx(P,{component:st,color:"inherit",to:"/my-drive",sx:{fontWeight:500,letterSpacing:.5,fontSize:20,textDecoration:"none"},children:"barca"})}),e.jsx(b,{item:!0,xs:!0,sx:{display:"flex",alignItems:"baseline",justifyContent:"flex-end"},children:s&&e.jsx(Zt,{})}),e.jsx(b,{item:!0,children:e.jsx(Vt,{})}),e.jsx(b,{item:!0,children:e.jsx(T,{title:"Switch Theme",children:e.jsx(j,{size:"large",color:"inherit",onClick:r,children:t.mode==="light"?e.jsx(rt,{}):e.jsx(nt,{})})})}),e.jsx(b,{item:!0,children:e.jsx(T,{title:"Reset",children:e.jsx(j,{size:"large",color:"inherit",onClick:n,children:e.jsx(ot,{})})})}),e.jsx(b,{item:!0,children:e.jsx(Ht,{})})]})})})}const Y=250,Xt=()=>{const{data:s}=z();return oe().pathname==="/"?e.jsx(ae,{to:"/my-drive",replace:!0}):e.jsx(e.Fragment,{children:e.jsxs(f,{sx:{position:"fixed",inset:0,display:"flex"},children:[s&&e.jsxs(e.Fragment,{children:[e.jsx(f,{component:"nav",sx:{width:{md:Y},flexShrink:{md:0},display:"block","@media (max-width: 1024px)":{display:"none"}},children:e.jsx(Rt,{PaperProps:{sx:{width:Y,bgcolor:"background.default",boxSizing:"border-box"}}})}),e.jsx(qt,{})]}),e.jsxs(f,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[e.jsx(Jt,{session:s}),e.jsx(ct,{maxWidth:"xl",sx:{pt:1,marginTop:8,height:"calc(100% - 68px)","@media (max-width: 1024px)":{height:"calc(100% - 124px)"}},children:e.jsx(dt,{})})]})]})})},es={typography:{fontFamily:"'Poppins', sans-seriff",body1:{fontFamily:"'Poppins', sans-seriff"},button:{fontFamily:"'Poppins', sans-seriff"}},components:{MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}},ts=({children:s})=>{const[t,r]=_("themeMode","light"),[n,o]=_("schemeColor",V.A100),a=u.useMemo(()=>({toggleColorMode:()=>{r(l=>l==="light"?"dark":"light")},resetTheme:()=>{r("light"),o(V.A100)},setSchemeColor:o,schemeColor:n}),[]),i=ut(t,n,es);return e.jsx(W.Provider,{value:a,children:e.jsxs(pt,{theme:i,children:[e.jsx(ht,{enableColorScheme:!0}),e.jsxs(xt,{locale:"en",children:[e.jsx(mt,{position:"bottom-right"}),e.jsx(wt,{children:s})]})]})})},ss=new ft({defaultOptions:{queries:{staleTime:10*(60*1e3),gcTime:5*(60*1e3),retry(s,t){var r;return((r=t.response)==null?void 0:r.status)!==404}}}}),rs=gt([{path:"*",element:e.jsx(Xt,{}),children:[{path:"login",lazy:()=>G(()=>import("./login-v5MS6ue_.js"),__vite__mapDeps([0,1]))},{path:":type/*",async lazy(){const{FileBrowser:s}=await G(()=>import("./path-YZmvO8ll.js"),__vite__mapDeps([2,1]));return{Component:()=>e.jsx(ns,{children:e.jsx(s,{})})}}}]}]);function ns({children:s}){const{data:t,status:r,isLoading:n}=z(),o=oe();return n||r==="error"?null:!t&&r==="success"?e.jsx(ae,{to:"/login",state:{from:o},replace:!0}):s}const os=()=>e.jsxs(yt,{client:ss,children:[e.jsx(ts,{children:e.jsx(jt,{router:rs})}),e.jsx(vt,{initialIsOpen:!1})]});bt(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(os,{})}));export{z as a,ce as b,zt as c,Ft as d,B as e,gs as f,Tt as g,m as h,xs as i,ds as j,cs as k,ls as l,is as m,hs as n,js as o,c as p,ps as q,ms as r,us as s,ys as t,pe as u,fs as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/login-v5MS6ue_.js","assets/vendor-oJTxWfXc.js","assets/path-YZmvO8ll.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
